(function(c){c.fn.aviaSlider=function(n){var a=c.extend({slides:"li",animationSpeed:900,autorotation:!0,autorotationSpeed:4E3,appendControlls:"",slideControlls:"items",blockSize:{height:"full",width:"full"},betweenBlockDelay:0,display:"topleft",switchMovement:!1,showText:!0,transition:"fade",backgroundOpacity:0.8,transitionOrder:["diagonaltop","diagonalbottom","topleft","bottomright","random"]},n);return this.each(function(){var b=c(this),d=b.find(a.slides),n=d.find("img"),l=d.length,u=d.width(),
v=d.height(),s=0,j=0,w=!1,q=0,z="active-button",m="",r=!0,x="",p="",f="",k=[];"full"==a.blockSize.height&&(a.blockSize.height=v);"full"==a.blockSize.width&&(a.blockSize.width=u);b.methods={init:function(){var e=0,g=0,t=!0,h="";for(d.filter(":first").css({"z-index":"5",display:"block"});t;)s++,h="-"+e+"px -"+g+"px",c('<div class="kBlock"></div>').appendTo(b).css({zIndex:20,position:"absolute",display:"none",left:e,top:g,height:a.blockSize.height,width:a.blockSize.width,backgroundPosition:h}),e+=a.blockSize.width,
e>=u&&(e=0,g+=a.blockSize.height),g>=v&&(t=!1);p=b.find(".kBlock");k.topleft=p;k.bottomright=c(p.get().reverse());k.diagonaltop=b.methods.kcubit(p);k.diagonalbottom=b.methods.kcubit(k.bottomright);k.random=b.methods.fyrandomize(p);d.each(function(){c.data(this,"data",{img:c(this).find("img").attr("src")})});1>=l?b.aviaSlider_preloadhelper({delay:200}):(b.aviaSlider_preloadhelper({callback:b.methods.preloadingDone}),b.methods.appendControlls().addDescription())},appendControlls:function(){"items"==
a.slideControlls&&(c(document).ready(function(){c("#carousel-controls").children(".carousel-button").remove()}),m=c("<div></div>").addClass("slide-controls").appendTo("#carousel-controls"),d.each(function(a){c('<a href="#" class="carousel-button '+z+'"></a>').appendTo(m).bind("click",{currentSlideNumber:a},b.methods.switchSlide);z=""}),m.width(m.width()).css("float","none"));return this},addDescription:function(){a.showText&&d.each(function(){var e=c(this),g=e.find("img").attr("alt"),b=g?g.split("::"):
"";""!=b[0]&&(g=void 0!=b[1]?"<strong>"+b[0]+"</strong>"+b[1]:b[0]);g&&c("<div></div>").addClass("feature_excerpt").html(g).css({display:"block",opacity:a.backgroundOpacity}).appendTo(e.find("a"))})},preloadingDone:function(){r=!1;d.css({backgroundColor:"#000000",backgroundImage:"none"});a.autorotation&&(b.methods.autorotate(),n.bind("click",function(){clearInterval(x)}))},autorotate:function(){var e=parseInt(a.autorotationSpeed)+a.betweenBlockDelay*s+a.animationSpeed;x=setInterval(function(){j++;
j==l&&(j=0);b.methods.switchSlide()},e)},switchSlide:function(e){var g=!1;void 0!=e&&!r&&(j!=e.data.currentSlideNumber?j=e.data.currentSlideNumber:g=!0);void 0!=e&&clearInterval(x);if(!r&&!1==g){r=!0;var t=d.filter(":visible"),h=d.filter(":eq("+j+")");e="url("+c.data(h[0],"data").img+")";a.slideControlls&&(m.find(".active-button").removeClass("active-button").addClass("inactive-button"),m.find("a:eq("+j+")").addClass("active-button").removeClass("inactive-button"));f=k[a.display];d.find(">a>img").css({opacity:1,
visibility:"visible"});if(a.switchMovement&&("topleft"==a.display||"diagonaltop"==a.display))!1==w?(f=k[a.display],w=!0):("topleft"==a.display&&(f=k.bottomright),"diagonaltop"==a.display&&(f=k.diagonalbottom),w=!1);"random"==a.display&&(f=b.methods.fyrandomize(p));"all"==a.display&&(f=k[a.transitionOrder[q]],q++,q>=a.transitionOrder.length&&(q=0));f.css({backgroundImage:e}).each(function(e){var g=c(this);setTimeout(function(){var c=[];"drop"==a.transition?(c.css={height:1,width:a.blockSize.width,
display:"block",opacity:0},c.anim={height:a.blockSize.height,width:a.blockSize.width,opacity:1}):"fade"==a.transition?(c.css={display:"block",opacity:0},c.anim={opacity:1}):(c.css={height:1,width:1,display:"block",opacity:0},c.anim={height:a.blockSize.height,width:a.blockSize.width,opacity:1});g.css(c.css).animate(c.anim,a.animationSpeed,function(){e+1==s&&b.methods.changeImage(t,h)})},e*a.betweenBlockDelay)})}return!1},changeImage:function(e,c){e.css({zIndex:0,display:"none"});c.css({zIndex:3,display:"block"});
f.fadeOut(1*a.animationSpeed/3,function(){r=!1})},fyrandomize:function(a){var b=a.length;a=c(a);if(0==b)return!1;for(;--b;){var d=Math.floor(Math.random()*(b+1)),h=a[b];a[b]=a[d];a[d]=h}return a},kcubit:function(b){var d=b.length,k=c(b),h=0,f=Math.ceil(v/a.blockSize.height),n=Math.ceil(u/a.blockSize.width),n=s/n,f=s/f,l=0,j=0,m=0,p=0,r=!1,q=!1;if(0==d)return!1;for(m=0;m<d;m++)if(k[m]=b[h],0==h%f&&s-m>f||0==(j+1)%n?(h-=(f-1)*j-1,j=0,l++,q=!1,0<p&&(j=p,h+=(f-1)*j)):(h+=f-1,j++),0==l%(f-1)&&0!=l&&0==
p||!0==r&&!1==q)l=0.1,p++,q=r=!0;return k}};b.methods.init()})}})(jQuery);
(function(c){c.fn.aviaSlider_preloadhelper=function(n,a){var b=c.extend({fadeInSpeed:800,maxLoops:10,callback:""},n);return this.each(function(){c(this);var d=c("img",this).css({display:"block"});d.parent();var y=d,l={checkImage:function(){d.each(function(){!0==this.complete&&(d=d.not(this))});d.length&&0<=b.maxLoops?(b.maxLoops--,setTimeout(l.checkImage,500)):l.showImages()},showImages:function(){y.each(function(a){c(this).css("visibility","visible").animate({opacity:1},b.fadeInSpeed,function(){y.length==
a+1&&l.callback(a)})})},callback:function(){n instanceof Function&&(a=n);a instanceof Function&&a.call(this);""!=b.callback&&b.callback()}};l.checkImage()})}})(jQuery);